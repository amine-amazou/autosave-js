!function(){"use strict";class e{static remember({input:e,value:t}){switch(e.type){case"checkbox":e.checked="true"==t;break;case"radio":e.value==t&&(e.checked=!0);break;default:e.value=t}}static prefix(e,t){return t?`autosave-${t}-${e}`:`autosave-${e}`}static id(e){return"checkbox"!==e.type?e.id:`${e.id}-${e.value}`}static setup({input:e,formId:t}){let s=this.id(e),r=sessionStorage.getItem(this.prefix(s,t));if(null==r){switch(e.type){case"checkbox":sessionStorage.setItem(this.prefix(s,t),!1);break;case"radio":sessionStorage.setItem(this.prefix(s,t),"");break;default:sessionStorage.setItem(this.prefix(s,t),e.value)}return}this.remember({input:e,value:r})}static handle(e,t=!1){this.setup({input:e,formId:t}),e.addEventListener("input",()=>{let s=this.id(e),r="checkbox"==e.type?e.checked:e.value;""!==r?sessionStorage.setItem(this.prefix(s,t),r):delete sessionStorage[this.prefix(s,t)]})}static sessionKeys(e){return Object.keys(sessionStorage).filter(t=>t.startsWith(e))}static destroy(e){delete sessionStorage[e]}static empty(e){"object"!=typeof e&&(e=document.getElementById(e)),"select"!==e.localName?"color"!==e.type?"radio"!==e.type&&"checkbox"!==e.type?e.value="":e.checked=!1:e.value="#000000":e.value=e.children[0].value}static splitKey(e){return e.split("-").reverse()}static inputs(e=!1){return e?document.querySelectorAll(`form[id='${e}'] > input:not([except], [type='submit'], [type='hidden'], [type='password']), form[id='${e}'] select:not([except]), form[id='${e}'] textarea:not([except])`):document.querySelectorAll("form[autosave] > input:not([except], [type='submit'], [type='hidden'], [type='password']), input[autosave], form[autosave] select:not([except]), form[autosave] textarea:not([except])")}static excepts(e=!1){return e?document.querySelectorAll(`form[id='${e}'] input[except]`):document.querySelectorAll("form[autosave] input[except]")}}window.AutoSave=new class t{f;focus(e){return"object"==typeof e?this.f=e.target.id:tbis.f=e,this}use(t=!1,s=!1){let r={};s&&focus(s);let i=e.prefix(this.f);return(e.sessionKeys(i).forEach(t=>{let s=e.splitKey(t);s.length<=3?r[s[0]]=sessionStorage.getItem(t):(Object.keys(r).includes(s[1])||(r[s[1]]=[]),"true"==sessionStorage.getItem(t)&&r[s[1]].push(s[0]))}),e.excepts().forEach(e=>r[e.id]=e.value),t)?(t(r),this):r}forget(t=!1){return t&&focus(t),e.inputs(this.f).forEach(t=>{e.empty(t),e.destroy(e.prefix(e.id(t),t.form.id))}),e.excepts(this.f).forEach(t=>e.empty(t)),!0}apply(){return e.inputs().forEach(t=>e.handle(t,t.form?.id)),this}}().apply()}();
